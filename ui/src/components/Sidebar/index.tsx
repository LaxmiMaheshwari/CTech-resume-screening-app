import { useState } from "react";
import { useNavigate } from "react-router-dom";
import { useSelector } from "react-redux";
import chatAI from "../../assets/icons/chatAI.svg";
import { RootState } from "../../redux/store";
import LogoutPopup from "../Logout";

export default function Sidebar() {
  const [active, setActive] = useState("AI Chat");
  const navigate = useNavigate();
  const { user } = useSelector((state: RootState) => state.loginUser);

  const menuItems = [
    {
      name: "Home",
      icon: chatAI,
      route: "/",
      svgActiveIcon: (
        <svg
          style={{
            width: "clamp(12px, 1.4vw, 52px)",
            height: "clamp(10px, 1.4vw, 52vw)",
          }}
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M21 20.6C20.8667 20.6 20.7417 20.575 20.625 20.525C20.5083 20.475 20.4 20.4 20.3 20.3L18 18H8C7.45 18 6.97917 17.8042 6.5875 17.4125C6.19583 17.0208 6 16.55 6 16V15H17C17.55 15 18.0208 14.8042 18.4125 14.4125C18.8042 14.0208 19 13.55 19 13V6H20C20.55 6 21.0208 6.19583 21.4125 6.5875C21.8042 6.97917 22 7.45 22 8V19.575C22 19.875 21.9 20.1208 21.7 20.3125C21.5 20.5042 21.2667 20.6 21 20.6ZM4 12.175L5.175 11H15V4H4V12.175ZM3 15.6C2.73333 15.6 2.5 15.5042 2.3 15.3125C2.1 15.1208 2 14.875 2 14.575V4C2 3.45 2.19583 2.97917 2.5875 2.5875C2.97917 2.19583 3.45 2 4 2H15C15.55 2 16.0208 2.19583 16.4125 2.5875C16.8042 2.97917 17 3.45 17 4V11C17 11.55 16.8042 12.0208 16.4125 12.4125C16.0208 12.8042 15.55 13 15 13H6L3.7 15.3C3.6 15.4 3.49167 15.475 3.375 15.525C3.25833 15.575 3.13333 15.6 3 15.6Z"
            fill="white"
          />
        </svg>
      ),
      svgDeactiveIcon: (
        <svg
          style={{
            width: "clamp(12px, 1.4vw, 52px)",
            height: "clamp(10px, 1.4vw, 52vw)",
          }}
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M21 20.6C20.8667 20.6 20.7417 20.575 20.625 20.525C20.5083 20.475 20.4 20.4 20.3 20.3L18 18H8C7.45 18 6.97917 17.8042 6.5875 17.4125C6.19583 17.0208 6 16.55 6 16V15H17C17.55 15 18.0208 14.8042 18.4125 14.4125C18.8042 14.0208 19 13.55 19 13V6H20C20.55 6 21.0208 6.19583 21.4125 6.5875C21.8042 6.97917 22 7.45 22 8V19.575C22 19.875 21.9 20.1208 21.7 20.3125C21.5 20.5042 21.2667 20.6 21 20.6ZM4 12.175L5.175 11H15V4H4V12.175ZM3 15.6C2.73333 15.6 2.5 15.5042 2.3 15.3125C2.1 15.1208 2 14.875 2 14.575V4C2 3.45 2.19583 2.97917 2.5875 2.5875C2.97917 2.19583 3.45 2 4 2H15C15.55 2 16.0208 2.19583 16.4125 2.5875C16.8042 2.97917 17 3.45 17 4V11C17 11.55 16.8042 12.0208 16.4125 12.4125C16.0208 12.8042 15.55 13 15 13H6L3.7 15.3C3.6 15.4 3.49167 15.475 3.375 15.525C3.25833 15.575 3.13333 15.6 3 15.6Z"
            fill="#BCBCBC"
          />
        </svg>
      ),
    },
    // {
    //   name: "About",
    //   icon: knowledgeGraph,
    //   route: "/about",
    //   svgActiveIcon: (
    //     <svg
    //       style={{
    //         width: "clamp(12px, 1.4vw, 52px)",
    //         height: "clamp(10px, 1.4vw, 52vw)",
    //       }}
    //       viewBox="0 0 24 24"
    //       fill="none"
    //       xmlns="http://www.w3.org/2000/svg"
    //     >
    //       <path
    //         d="M12 22C11.1667 22 10.4583 21.7083 9.875 21.125C9.29167 20.5417 9 19.8333 9 19C9 18.9167 9.00417 18.825 9.0125 18.725C9.02083 18.625 9.03333 18.5333 9.05 18.45L6.975 17.275C6.70833 17.5083 6.40833 17.6875 6.075 17.8125C5.74167 17.9375 5.38333 18 5 18C4.16667 18 3.45833 17.7083 2.875 17.125C2.29167 16.5417 2 15.8333 2 15C2 14.1667 2.29167 13.4583 2.875 12.875C3.45833 12.2917 4.16667 12 5 12C5.4 12 5.775 12.075 6.125 12.225C6.475 12.375 6.79167 12.5833 7.075 12.85L10.05 11.35C10 10.9667 10.0208 10.5917 10.1125 10.225C10.2042 9.85833 10.3667 9.51667 10.6 9.2L9.75 7.9C9.63333 7.93333 9.5125 7.95833 9.3875 7.975C9.2625 7.99167 9.13333 8 9 8C8.16667 8 7.45833 7.70833 6.875 7.125C6.29167 6.54167 6 5.83333 6 5C6 4.16667 6.29167 3.45833 6.875 2.875C7.45833 2.29167 8.16667 2 9 2C9.83333 2 10.5417 2.29167 11.125 2.875C11.7083 3.45833 12 4.16667 12 5C12 5.33333 11.9458 5.65417 11.8375 5.9625C11.7292 6.27083 11.5833 6.55 11.4 6.8L12.275 8.1C12.4083 8.06667 12.5333 8.04167 12.65 8.025C12.7667 8.00833 12.8917 8 13.025 8C13.3083 8 13.575 8.03333 13.825 8.1C14.075 8.16667 14.3167 8.26667 14.55 8.4L16.2 7.05C16.1333 6.88333 16.0833 6.7125 16.05 6.5375C16.0167 6.3625 16 6.18333 16 6C16 5.16667 16.2917 4.45833 16.875 3.875C17.4583 3.29167 18.1667 3 19 3C19.8333 3 20.5417 3.29167 21.125 3.875C21.7083 4.45833 22 5.16667 22 6C22 6.83333 21.7083 7.54167 21.125 8.125C20.5417 8.70833 19.8333 9 19 9C18.7167 9 18.45 8.9625 18.2 8.8875C17.95 8.8125 17.7083 8.70833 17.475 8.575L15.825 9.95C15.8917 10.1167 15.9417 10.2875 15.975 10.4625C16.0083 10.6375 16.025 10.8167 16.025 11C16.025 11.8333 15.7333 12.5417 15.15 13.125C14.5667 13.7083 13.8583 14 13.025 14C12.625 14 12.2458 13.925 11.8875 13.775C11.5292 13.625 11.2083 13.4167 10.925 13.15L7.975 14.625C8.00833 14.775 8.02083 14.925 8.0125 15.075C8.00417 15.225 7.98333 15.375 7.95 15.525L10.05 16.725C10.3167 16.4917 10.6125 16.3125 10.9375 16.1875C11.2625 16.0625 11.6167 16 12 16C12.8333 16 13.5417 16.2917 14.125 16.875C14.7083 17.4583 15 18.1667 15 19C15 19.8333 14.7083 20.5417 14.125 21.125C13.5417 21.7083 12.8333 22 12 22ZM5 16C5.28333 16 5.52083 15.9042 5.7125 15.7125C5.90417 15.5208 6 15.2833 6 15C6 14.7167 5.90417 14.4792 5.7125 14.2875C5.52083 14.0958 5.28333 14 5 14C4.71667 14 4.47917 14.0958 4.2875 14.2875C4.09583 14.4792 4 14.7167 4 15C4 15.2833 4.09583 15.5208 4.2875 15.7125C4.47917 15.9042 4.71667 16 5 16ZM9 6C9.28333 6 9.52083 5.90417 9.7125 5.7125C9.90417 5.52083 10 5.28333 10 5C10 4.71667 9.90417 4.47917 9.7125 4.2875C9.52083 4.09583 9.28333 4 9 4C8.71667 4 8.47917 4.09583 8.2875 4.2875C8.09583 4.47917 8 4.71667 8 5C8 5.28333 8.09583 5.52083 8.2875 5.7125C8.47917 5.90417 8.71667 6 9 6ZM12 20C12.2833 20 12.5208 19.9042 12.7125 19.7125C12.9042 19.5208 13 19.2833 13 19C13 18.7167 12.9042 18.4792 12.7125 18.2875C12.5208 18.0958 12.2833 18 12 18C11.7167 18 11.4792 18.0958 11.2875 18.2875C11.0958 18.4792 11 18.7167 11 19C11 19.2833 11.0958 19.5208 11.2875 19.7125C11.4792 19.9042 11.7167 20 12 20ZM13 12C13.2833 12 13.5208 11.9042 13.7125 11.7125C13.9042 11.5208 14 11.2833 14 11C14 10.7167 13.9042 10.4792 13.7125 10.2875C13.5208 10.0958 13.2833 10 13 10C12.7167 10 12.4792 10.0958 12.2875 10.2875C12.0958 10.4792 12 10.7167 12 11C12 11.2833 12.0958 11.5208 12.2875 11.7125C12.4792 11.9042 12.7167 12 13 12ZM19 7C19.2833 7 19.5208 6.90417 19.7125 6.7125C19.9042 6.52083 20 6.28333 20 6C20 5.71667 19.9042 5.47917 19.7125 5.2875C19.5208 5.09583 19.2833 5 19 5C18.7167 5 18.4792 5.09583 18.2875 5.2875C18.0958 5.47917 18 5.71667 18 6C18 6.28333 18.0958 6.52083 18.2875 6.7125C18.4792 6.90417 18.7167 7 19 7Z"
    //         fill="white"
    //       />
    //     </svg>
    //   ),
    //   svgDeactiveIcon: (
    //     <svg
    //       style={{
    //         width: "clamp(12px, 1.4vw, 52px)",
    //         height: "clamp(10px, 1.4vw, 52vw)",
    //       }}
    //       viewBox="0 0 24 24"
    //       fill="none"
    //       xmlns="http://www.w3.org/2000/svg"
    //     >
    //       <path
    //         d="M12 22C11.1667 22 10.4583 21.7083 9.875 21.125C9.29167 20.5417 9 19.8333 9 19C9 18.9167 9.00417 18.825 9.0125 18.725C9.02083 18.625 9.03333 18.5333 9.05 18.45L6.975 17.275C6.70833 17.5083 6.40833 17.6875 6.075 17.8125C5.74167 17.9375 5.38333 18 5 18C4.16667 18 3.45833 17.7083 2.875 17.125C2.29167 16.5417 2 15.8333 2 15C2 14.1667 2.29167 13.4583 2.875 12.875C3.45833 12.2917 4.16667 12 5 12C5.4 12 5.775 12.075 6.125 12.225C6.475 12.375 6.79167 12.5833 7.075 12.85L10.05 11.35C10 10.9667 10.0208 10.5917 10.1125 10.225C10.2042 9.85833 10.3667 9.51667 10.6 9.2L9.75 7.9C9.63333 7.93333 9.5125 7.95833 9.3875 7.975C9.2625 7.99167 9.13333 8 9 8C8.16667 8 7.45833 7.70833 6.875 7.125C6.29167 6.54167 6 5.83333 6 5C6 4.16667 6.29167 3.45833 6.875 2.875C7.45833 2.29167 8.16667 2 9 2C9.83333 2 10.5417 2.29167 11.125 2.875C11.7083 3.45833 12 4.16667 12 5C12 5.33333 11.9458 5.65417 11.8375 5.9625C11.7292 6.27083 11.5833 6.55 11.4 6.8L12.275 8.1C12.4083 8.06667 12.5333 8.04167 12.65 8.025C12.7667 8.00833 12.8917 8 13.025 8C13.3083 8 13.575 8.03333 13.825 8.1C14.075 8.16667 14.3167 8.26667 14.55 8.4L16.2 7.05C16.1333 6.88333 16.0833 6.7125 16.05 6.5375C16.0167 6.3625 16 6.18333 16 6C16 5.16667 16.2917 4.45833 16.875 3.875C17.4583 3.29167 18.1667 3 19 3C19.8333 3 20.5417 3.29167 21.125 3.875C21.7083 4.45833 22 5.16667 22 6C22 6.83333 21.7083 7.54167 21.125 8.125C20.5417 8.70833 19.8333 9 19 9C18.7167 9 18.45 8.9625 18.2 8.8875C17.95 8.8125 17.7083 8.70833 17.475 8.575L15.825 9.95C15.8917 10.1167 15.9417 10.2875 15.975 10.4625C16.0083 10.6375 16.025 10.8167 16.025 11C16.025 11.8333 15.7333 12.5417 15.15 13.125C14.5667 13.7083 13.8583 14 13.025 14C12.625 14 12.2458 13.925 11.8875 13.775C11.5292 13.625 11.2083 13.4167 10.925 13.15L7.975 14.625C8.00833 14.775 8.02083 14.925 8.0125 15.075C8.00417 15.225 7.98333 15.375 7.95 15.525L10.05 16.725C10.3167 16.4917 10.6125 16.3125 10.9375 16.1875C11.2625 16.0625 11.6167 16 12 16C12.8333 16 13.5417 16.2917 14.125 16.875C14.7083 17.4583 15 18.1667 15 19C15 19.8333 14.7083 20.5417 14.125 21.125C13.5417 21.7083 12.8333 22 12 22ZM5 16C5.28333 16 5.52083 15.9042 5.7125 15.7125C5.90417 15.5208 6 15.2833 6 15C6 14.7167 5.90417 14.4792 5.7125 14.2875C5.52083 14.0958 5.28333 14 5 14C4.71667 14 4.47917 14.0958 4.2875 14.2875C4.09583 14.4792 4 14.7167 4 15C4 15.2833 4.09583 15.5208 4.2875 15.7125C4.47917 15.9042 4.71667 16 5 16ZM9 6C9.28333 6 9.52083 5.90417 9.7125 5.7125C9.90417 5.52083 10 5.28333 10 5C10 4.71667 9.90417 4.47917 9.7125 4.2875C9.52083 4.09583 9.28333 4 9 4C8.71667 4 8.47917 4.09583 8.2875 4.2875C8.09583 4.47917 8 4.71667 8 5C8 5.28333 8.09583 5.52083 8.2875 5.7125C8.47917 5.90417 8.71667 6 9 6ZM12 20C12.2833 20 12.5208 19.9042 12.7125 19.7125C12.9042 19.5208 13 19.2833 13 19C13 18.7167 12.9042 18.4792 12.7125 18.2875C12.5208 18.0958 12.2833 18 12 18C11.7167 18 11.4792 18.0958 11.2875 18.2875C11.0958 18.4792 11 18.7167 11 19C11 19.2833 11.0958 19.5208 11.2875 19.7125C11.4792 19.9042 11.7167 20 12 20ZM13 12C13.2833 12 13.5208 11.9042 13.7125 11.7125C13.9042 11.5208 14 11.2833 14 11C14 10.7167 13.9042 10.4792 13.7125 10.2875C13.5208 10.0958 13.2833 10 13 10C12.7167 10 12.4792 10.0958 12.2875 10.2875C12.0958 10.4792 12 10.7167 12 11C12 11.2833 12.0958 11.5208 12.2875 11.7125C12.4792 11.9042 12.7167 12 13 12ZM19 7C19.2833 7 19.5208 6.90417 19.7125 6.7125C19.9042 6.52083 20 6.28333 20 6C20 5.71667 19.9042 5.47917 19.7125 5.2875C19.5208 5.09583 19.2833 5 19 5C18.7167 5 18.4792 5.09583 18.2875 5.2875C18.0958 5.47917 18 5.71667 18 6C18 6.28333 18.0958 6.52083 18.2875 6.7125C18.4792 6.90417 18.7167 7 19 7Z"
    //         fill="#BCBCBC"
    //       />
    //     </svg>
    //   ),
    // },
  ];
  const [open, setOpen] = useState(false);

  const changeRoute = (name: string, routeName: string) => {
    setActive(name);
    navigate(routeName);
  };

  return (
    <div
      className="h-screen bg-[#030303] text-white flex flex-col items-center"
      style={{
        paddingTop: "clamp(12px, 1.77vw, 82px)",
        paddingBottom: "clamp(12px, 1.77vw, 82px)",
      }}
    >
      {/* Logo */}
      <div>
        <svg
          width="50"
          height="49"
          viewBox="0 0 50 49"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          style={{
            width: "clamp(40px, 2.4vw, 200px)",
            height: "clamp(36px, 2.1vw, 200px)",
          }}
        >
          <path
            d="M50 24.0937L34.7044 48.1874L30.9935 42.3432L41.9229 25.1275L42.5783 24.0937L41.9229 23.0599L30.9935 5.84615V5.84415L34.7044 0L50 24.0937Z"
            fill="#125CC6"
          />
          <path
            d="M24.8088 11.3875L21.2891 5.84415L25 0L28.5176 5.54139L24.8088 11.3875Z"
            fill="#228AFF"
          />
          <path
            d="M40.2956 24.0934L25 48.1871L21.2891 42.343L32.2185 25.1272L32.8739 24.0934L32.2185 23.0596L26.1433 13.4885L29.8522 7.64453L40.2956 24.0934Z"
            fill="#228AFF"
          />
          <path
            d="M30.5912 24.0937L23.6654 35.0012L15.2956 48.1874L9.53311 39.1104L7.87188 36.4951L3.62919 29.8104L0 24.0937L6.92574 13.1842L15.2956 0L23.6654 13.1842L23.6674 13.186L16.7457 24.0977L15.3036 26.3704L9.41758 17.1022L9.41558 17.1062L8.087 19.1997L12.5209 26.1852L15.3036 30.5691L18.0782 26.1991L25.002 15.2896L26.962 18.377L30.5912 24.0937Z"
            fill="#E1F4FF"
          />
          <path
            opacity="0.4"
            d="M18.0782 26.1995L23.6655 35.0016L15.2956 48.1878L9.53311 39.1108L6.92575 35.0016L12.5209 26.1855L15.3036 30.5695L18.0782 26.1995Z"
            fill="#228AFF"
          />
          <path
            opacity="0.4"
            d="M9.41559 17.1062L6.92575 13.1842L15.2956 0L23.6655 13.1842L16.7417 24.0937L16.7457 24.0977L15.3036 26.3704L9.41759 17.1022L9.41559 17.1062Z"
            fill="#228AFF"
          />
          <path
            d="M34.7044 0L30.9935 5.84615V5.84415L34.7044 0Z"
            fill="white"
          />
        </svg>
      </div>

      <div
        className="flex items-center justify-center"
        style={{
          marginTop: " clamp(20px, 1.45vw, 52px)",
        }}
      ></div>

      {/* Menu Items */}
      <div className="flex flex-col w-full">
        {menuItems.map((item) => (
          <button
            key={item.name}
            // onClick={() => setActive(item.name)}
            onClick={() => changeRoute(item.name, item.route)}
            style={{
              marginTop: " clamp(10px, 1.45vw, 52px)",
            }}
            className={`flex flex-col items-center gap-1 py-2 text-sm rounded-md mx-2 transition ${
              active === item.name
                ? "bg-gray-500 text-white font-semibold"
                : "text-gray-300 hover:bg-gray-600"
            }`}
          >
            {/* <img
              src={item.icon}
              alt={item.name}
              style={{
                width: "clamp(12px, 1.4vw, 52px)",
                height: "clamp(10px, 1.4vw, 52vw)",
              }}
            /> */}
            {active === item.name ? (
              <>{item.svgActiveIcon}</>
            ) : (
              <>{item.svgDeactiveIcon}</>
            )}

            <span
              className="font-medium leading-[120%] tracking-normal text-center"
              style={{ fontSize: "clamp(8px, 0.76vw, 32px)" }}
            >
              {item.name}
            </span>
          </button>
        ))}
      </div>

      {/* Bottom Profile */}
      <div className="fixed bottom-[15px] flex justify-center z-50">
        <img
          src={user?.picture}
          alt="profile"
          style={{
            width: "clamp(20px, 2.7vw, 92px)",
            height: "clamp(20px, 2.7vw, 92px)",
          }}
          className="rounded-full cursor-pointer border-2 border-gray-600 hover:border-blue-400"
          onClick={() => {
            setOpen(!open);
          }}
        />

        {/* Popup */}
        <LogoutPopup
          open={open}
          onClose={() => setOpen(false)}
          position={{
            left: "70px", // adjust based on layout
            bottom: "20px",
          }}
        />
      </div>
    </div>
  );
}
